<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>HMN_102</title>

  <link rel="stylesheet" href="../../..../../../css/hmui/swiper.css">
  <link rel="stylesheet" href="../../../css/hmui/animate.css">
  <link rel="stylesheet" href="../../../css/hmui/common.css">
  <link rel="stylesheet" href="../../../css/global/contents.css">
  <script src="../../../js/hmui/lib/jquery-1.12.3.min.js"></script>
  <script src="../../../js/hmui/lib/swiper.js"></script>
  <script src="../../../js/hmui/lib/waypoints.min.js"></script>
  <script src="../../../js/hmui/lib/jquery.counterup.js"></script>
  <script src="../../../js/hmui/ui_common.js"></script>
</head>
<body>
  <main id="root">

    <!-- // header -->

    <!-- // contents-->

    <!-- 퍼블 동작확인용 버튼 -->
    <button class="btn_txt fnOpenPop" data-name="popupId">머니조회</button>

    <!-- popup -->
    <!-- 22.10.28 환종추가 마크업변경 -->
    <div id="popupId" class="wrap_layer type_full" data-pageid="HMN102">
      <div class="inner_layer">
        <div class="content_layer type_full">
          
          <div class="section_moneybag_all">
            <!-- CASE #3 약관동의O 계좌연결O -->
            <!-- 23.03.21 / 22.11.11 환종추가 -->
            <div class="wrap_moneybag_all">
              <h2 class="blind">하나머니 전체보기</h2>
              <div class="wrap_btn type_justify">
                <button type="button" class="btn_ico_howto left" data-name="coachmark"><span>사용법</span><span class="ico_tap"></span></button>
                <button type="button" class="btn_ico_reordering right"><span>잔액기준 재정렬</span><span class="ico_refresh_2"></span></button>
              </div>
              <button type="button" class="btn_tooltip fnOpenTooltip" data-name="tooltip">
                <span class="txt_center">제공통화 외 지역 사용안내</span>
                <span class="ico_tooltip"><span class="blind">툴팁</span></span>
              </button>
              <div class="list_moneybag wrap_show">
                <h3><span class="txt">홈 화면에서 보여져요</span><span class="bor"></span></h3>
                <ul id="showList">
                  <li id="hanamoney">
                    <span class="chk_star">
                      <input type="checkbox" id="ccy01" name="ccy" checked disabled/>
                      <label for="ccy01"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_hanamoney"></span>
                      <span>하나머니</span>
                      <span class="total_amount"><em class="txt_num">1,000,000</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy02" name="ccy" checked />
                      <label for="ccy02"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_usd"></span>
                      <span>미국 USD</span>
                      <span class="total_amount"><em class="txt_num">9,000.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                </ul>
              </div>
              <div class="list_moneybag wrap_hide">
                <h3><span class="txt">홈 화면에서 숨겼어요</span><span class="bor"></span></h3>
                <ul id="hideList">
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy03" name="ccy" />
                      <label for="ccy03"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy empty"><!-- 보유금액이 없는 경우 empty class추가 -->
                      <span class="ico_cur_jpy"></span>
                      <span>일본 JPY</span>
                      <span class="total_amount"><em class="txt_num">0</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy04" name="ccy" />
                      <label for="ccy04"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy empty"><!-- 보유금액이 없는 경우 empty class추가 -->
                      <span class="ico_cur_eur"></span>
                      <span>유럽 EUR</span>
                      <span class="total_amount"><em class="txt_num">0</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy05" name="ccy" />
                      <label for="ccy05"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_gbp"></span>
                      <span>영국 GBP</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy06" name="ccy" />
                      <label for="ccy06"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_cad"></span>
                      <span>캐나다 CAD</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy07" name="ccy" />
                      <label for="ccy07"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_cny"></span>
                      <span>중국 CNY</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy08" name="ccy" />
                      <label for="ccy08"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_sgd"></span>
                      <span>싱가포르 SGD</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy09" name="ccy" />
                      <label for="ccy09"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_vnd"></span>
                      <span>베트남 VND</span>
                      <span class="total_amount"><em class="txt_num">99,999,999</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy10" name="ccy" />
                      <label for="ccy10"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_hkd"></span>
                      <span>홍콩 HKD</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy11" name="ccy" />
                      <label for="ccy11"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_thb"></span>
                      <span>태국 THB</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy12" name="ccy" />
                      <label for="ccy12"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_php"></span>
                      <span>필리핀 PHP</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy13" name="ccy" />
                      <label for="ccy13"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_idr"></span>
                      <span>인도네시아 IDR</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy14" name="ccy" />
                      <label for="ccy14"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_aud"></span>
                      <span>호주 AUD</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy15" name="ccy" />
                      <label for="ccy15"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_nzd"></span>
                      <span>뉴질랜드 NZD</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy16" name="ccy" />
                      <label for="ccy16"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_huf"></span>
                      <span>헝가리 HUF</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy17" name="ccy" />
                      <label for="ccy17"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_chf"></span>
                      <span>스위스 CHF</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy18" name="ccy" />
                      <label for="ccy18"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_sek"></span>
                      <span>스웨덴 SEK</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                  <li>
                    <span class="chk_star">
                      <input type="checkbox" id="ccy19" name="ccy" />
                      <label for="ccy19"><span class="blind">홈 화면에 보이기</span></label>
                    </span>
                    <a href="#none" class="txt_ccy">
                      <span class="ico_cur_czk"></span>
                      <span>체코 CZK</span>
                      <span class="total_amount"><em class="txt_num">9,999.00</em></span>
                    </a>
                    <button type="button" class="btn_ico_more type_white"><span class="blind">돈통더보기</span></button>
                  </li>
                </ul>
              </div>
            </div>
            <!-- // 23.03.21 / 22.11.11 환종추가 -->
            <!-- // CASE #3 약관동의O 계좌연결O -->

          </div>
        </div>
        <button class="btn_close_txt type_bottom fnClosePop"><span>닫기</span><span class="btn_ico_close_wxs"></span></button><!-- 22.11.11 버튼 마크업 변경 -->
      </div>

      <!-- 22.11.11 코치마크 추가 -->
      <div id="coachmark" class="wrap_coachmark orderMoneybag">
        <div class="bg" aria-hidden="true"><span class="refresh"></span></div>
        <div class="stepbox step1">
          <div class="inner">
            <div class="guide_image">
              <span class="circle"></span>
              <span class="img_gesture_press"></span>
            </div>
            <p class="txt">별을 켜면 해당 통화가<br>홈 화면에 나타나요.</p>
          </div>
        </div>
        <div class="stepbox step2">
          <div class="inner">
            <p class="txt">꾸~욱 눌러서 내가 원하는 대로<br>순서를 조정할 수 있어요.</p>
            <div class="guide_image">
              <span class="arrow"></span>
              <span class="box"></span>
              <span class="arrow"></span>
              <span class="img_gesture_press"></span>
            </div>
          </div>
        </div>
        <div class="stepbox step3">
          <div class="inner">
            <div class="guide_image">
              <span class="circle"></span>
              <span class="img_gesture_press"></span>
            </div>
            <p class="txt">잔액 순서로 한번에 정렬하고 싶다면<br>재정렬 버튼을 눌러보세요.</p>
          </div>
        </div>
        <button type="button" class="btn_ico_close"><span class="blind">닫기</span></button>
      </div>
      <!-- // 22.11.11 코치마크 추가 -->
    </div>
    <!-- // popup -->
    
    <div id="snackbar" class="wrap_toast type_snackbar top">
      <p class="txt_toast">원화 하나머니는<br>홈 화면에서 숨길 수 없어요.</p>
      <button class="btn_ico_close_w"><span class="blind">닫기</span></button>
    </div>
    <!-- // 22.10.28 환종추가 마크업변경 -->

    <!-- 22.12.01 환추가업데이트 알럿 -->
    <div id="confirmId" class="wrap_layer type_alert" data-dim="true"><!-- native dim 미사용 시 data-dim="true" 추가 -->
      <div class="inner_layer">
        <div class="content_layer">
          <div class="wrap_center">
            <p class="txt_alert">별★ 기능이 개선됐어요!<br><br>
              새로워진 별★ 기능이 궁금하시면<br>
              지금 바로 업데이트하고 사용해 보세요~
          </div>
        </div>
        <div class="section_button_alert">
          <div class="wrap_btn_full">
            <button type="button" class="btn_full_secondary fnClosePop">다음에</button>
            <button type="button" class="btn_full_primary fnClosePop">업데이트 하기</button>
          </div>
        </div>
      </div>
    </div>
    <!-- // 22.12.01 환추가업데이트 알럿 -->

    <!-- 23.03.14 툴팁 추가 -->
    <!-- tooltip -->
    <div id="tooltip" class="wrap_tooltip">
      <div class="inner_tooltip">
        <p class="txt_tooltip">
          제공통화 외 지역에서는 <br><em class="txt_bold">달러머니(USD)를 이용</em>하세요!
          <span class="txt_sub">충전한 달러머니 이용시 브랜드사 (Mastercard/UPI)에서 정한 환전수수료가 발생되지만, 기타지역 통화의 <span class="txt_bold">‘현찰 살 때’ 환율보다 더 저렴한 수수료로 이용</span>할 수 있어요.</span>
        </p>
        <button class="btn_ico_close fnCloseTooltip"><span class="blind">닫기</span></button>
      </div>
    </div>
    <!-- // tooltip -->

  </main>
  
  <script src="../../../js/hmui/lib/Sortable.js"></script>
  <script>
    $(function(){
      // 팝업 열기 param 오픈할 팝업 id
      fnOpenLayerPop('popupId');
      setTimeout(function(){
        // fnOpenLayerPop('confirmId');
      },300);

      // 재정렬
      $('.btn_ico_reordering').on('click', function(){
        $(this).addClass('loading');
        // 재정렬 완료시 loading 클래스 삭제
        setTimeout(function(){
          $(this).removeClass('loading');
        }.bind(this),2000);
      });

      // 코치마크
      var $el = $('.wrap_coachmark');
      var $btn = $('.btn_ico_howto');

      $btn.on('click', function(){
        $el = $('#' + $(this).data('name'));
        $el.addClass('on');
        $el.find('.stepbox').each(function(idx, el) {
          setTimeout(function(){
            $(el).addClass('on');
          }, idx*1600 );
        });
      });

      $el.find('.btn_ico_close').on('click', function(){
        $el.removeClass('on')
          .find('.stepbox').removeClass('on');
        $btn.focus();
      });

      // 순서변경
      // 별 체크 클릭 시
      $('.chk_star label').on('click', function(){
        var from = $(this).closest('ul').attr('id');
        var $itemEl = $(this).closest('li');

        //2C. 하나머니 미노출 불가
        if ($itemEl.attr('id') == 'hanamoney') {
          fnToastPop('snackbar');
          return false;
        }

        $itemEl.addClass('hide');
        if (from == 'showList') {
          setTimeout(function(){
            $('#hideList').prepend($itemEl).addClass('hide');
          },100);
        } else {
          setTimeout(function(){
            $('#showList').append($itemEl).addClass('.hide');
            $('.content_layer').animate({
              scrollTop: 0
            },100);
          },100);
        }
        setTimeout(function(){
          $itemEl.removeClass('hide');
        },200);
      });

      $('.list_moneybag').find('li').on('click', function(e){
        e.stopPropagation();
      });

      // 홈화면 노출 리스트
      var sortShowList = new Sortable(showList, {
        group: {
          name: 'shared',
        },
        handle: '.txt_ccy',
        delay: 80,
        delayOnTouchOnly: true,
        animation: 150,
        direction: 'vertical',
        onEnd: function (evt) {
          var $itemEl = $(evt.item);

          // 하나머니 6a-1 미노출불가
          if ( $itemEl.attr('id') == 'hanamoney' && evt.to != evt.from ) {
            if ( $(evt.from).find('li').length <= 0 || $(evt.from).find('li').length == evt.oldIndex ) { 
              $(evt.from).append($itemEl);
            } else {
              $(evt.from).find('li').eq(evt.oldIndex).before($itemEl);
            }
            $itemEl.removeClass('forbidden');
            $('.content_layer').animate({
              scrollTop: 0
            },200);
            setTimeout(function(){
              fnToastPop('snackbar');
            },300);
            return;
          }
          // 미노출 시 체크해제
          if ( evt.to !== evt.from ) {
            setTimeout(function(){
              $itemEl.find('.chk_star input').prop('checked', false);
            },0);
          }
        },
        onMove: function (evt, originalEvent) {
          var $itemEl = $(evt.dragged);
          var $relatedList = $(evt.related).parent('ul').attr('id');

          // 하나머니 미노출 불가
          if ($itemEl.attr('id') === 'hanamoney' && $relatedList !== 'showList' ) {
            $itemEl.addClass('forbidden');
          } else {
            $itemEl.removeClass('forbidden');
          }
        }
      });
      // 홈화면 미노출 리스트
      var sortHideList = new Sortable(hideList, {
        group: {
          name: 'shared',
        },
        handle: ".txt_ccy",
        delay: 80,
        delayOnTouchOnly: true,
        animation: 150,
        direction: 'vertical',
        onEnd: function (evt) {
          var $itemEl = $(evt.item);
          
          // 노출 시 체크
          if ( evt.to !== evt.from ) {
            setTimeout(function(){
              $itemEl.find('.chk_star input').prop('checked', true);
            },0);
          }
        },
      })
    });
  </script>
</body>
</html>