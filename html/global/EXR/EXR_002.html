<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="format-detection" content="telephone=no">
  <title>EXR_002</title>

  <link rel="stylesheet" href="../../../css/hmui/swiper.css">
  <link rel="stylesheet" href="../../../css/hmui/animate.css">
  <link rel="stylesheet" href="../../../css/hmui/common.css">
  <link rel="stylesheet" href="../../../css/global/contents.css">
  <script src="../../../js/hmui/lib/jquery-1.12.3.min.js"></script>
  <script src="../../../js/hmui/lib/swiper.js"></script>
  <script src="../../../js/hmui/lib/waypoints.min.js"></script>
  <script src="../../../js/hmui/lib/jquery.counterup.js"></script>
  <script src="../../../js/hmui/ui_common.js"></script>
</head>
<body>
  <main id="root">
    <header id="header">
      <div class="inner_fixed">
        <button class="btn_ico_prev"><span class="blind">이전</span></button>
        <h1>환율정보</h1>
        <button class="btn_ico_menu"><span class="blind">전체메뉴</span></button>
      </div>
    </header>
    <!-- // header -->

    <div id="contents" class="wrap_contents">
      <div class="contents">
        <section data-roll="EXR">
          <div class="wrap_top_info exr_info">
            <div class="wrap_dropdown fnCloseOut" data-type="exr">
              <button type="button" class="btn_dropdown type_big"><span class="current"><em class="txt_ccy"><span class="ico_cur_usd"></span><span>미국 USD 100</span></em></span></button><!-- 22.11.10 span tag 추가 -->
              <div class="list_dropdown">
                <ul>
                  <!-- <li><button type="button"><span class="txt_ccy"><span class="ico_cur_usd"></span>USD</span></button></li> -->
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_jpy"></span>JPY</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_eur"></span>EUR</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_gbp"></span>GBP</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_cny"></span>CNY</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_sgd"></span>SGD</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_vnd"></span>VND</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_cad"></span>CAD</span></button></li>
                  <li><button type="button"><span class="txt_ccy dir_col"><span class="ico_cur_aud"></span>AUD</span></button></li>
                </ul>
              </div>
            </div>
            <div class="exch_rate_info">
              <div class="left">
                <p class="txt_amount_gap up">전날 대비 <em class="txt_num">-3.50</em></p>
                <p class="txt_amount_gap down">전주 대비 <em class="txt_num">+12.60</em></p>
                <p class="txt_amount_gap equal">전주 대비 <em class="txt_num">0.00</em></p>
              </div>
              <div class="right">
                <p class="txt_type">매매기준율</p>
                <p class="txt_amount up"><em class="txt_num">1,355.60</em>원</p>
                <p class="txt_amount down"><em class="txt_num">1,355.60</em>원</p>
                <p class="txt_amount equal"><em class="txt_num">1,355.60</em>원</p>
              </div>
            </div>
            <div class="fnSimpleAcco">
              <div class="wrap_acco">
                <button class="btn_refresh">2022.08.30 15:21 (95회차)<span class="ico_refresh_s"><span class="blind">새로고침</span></button>
                <ul class="list_info">
                  <li>
                    <span class="tit">매매기준율</span>
                    <span class="txt"><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">현찰 살 때</span>
                    <span class="txt"><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">현찰 팔 때</span>
                    <span class="txt"><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">송금 보낼 때</span>
                    <span class="txt"><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">송금 받을 때</span>
                    <span class="txt"><em class="txt_num">1,355.60</em>원</span>
                  </li>
                </ul>
              </div>
              <button type="button" class="btn_acco">상세환율 보기<span class="ico_arr_down_2"></span></button>
            </div>
            <div class="wrap_btn type_col">
              <a href="#none" class="btn_round_m type_line"><span class="txt">목표환율 자동충전</span></a>
              <a href="#none" class="btn_round_m btn_primary"><span class="txt">바로 충전</span></a>
            </div>
          </div>

          <div class="wrap_detail_exr">
            <div class="section_tab type_sub_line">
              <ul class="wrap_tab_btn">
                <li class="on"><button type="button" class="btn_tab_box">1w</button></li>
                <li><button type="button" class="btn_tab_box">1m</button></li>
                <li><button type="button" class="btn_tab_box">3m</button></li>
                <li><button type="button" class="btn_tab_box">6m</button></li>
                <li><button type="button" class="btn_tab_box">1y</button></li>
              </ul>
            </div>

            <div class="wrap_chart">
              <canvas id="lineChart_exr002" class="line_chart"></canvas>
            </div>

            <div class="wrap_exch_monthly">
              <p class="tit">최근 1개월동안<br>
                <strong>다른 사람들은 얼마에 환전</strong>했을까요?</p>
              <p class="wrap_info_exchange">
                <span class="txt_info txt_point_1"><span>USD</span> 1 = <span class="txt_num">1,340.10</span>원</span>
              </p>
              <p class="txt_basis">22.08.08 ~ 22.09.08 평균 매입가</p>
            </div>

            <div class="wrap_box bg_darkgrey">
              <div class="box_tit">
                <p class="tit"><span>김하나</span>님의 <span>달러머니</span></p>
                <span class="txt">최근 1년 기준</span>
              </div>
              <!-- 거래내역 있을 시 / 데이터 로드 전 default로 노출  -->
              <div>
                <ul class="list_info">
                  <li>
                    <span class="tit">내가 산 최저가</span>
                    <span class="txt"><span class="emoji_lowest"></span><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">내가 산 최고가</span>
                    <span class="txt"><span class="emoji_highest"></span><em class="txt_num">1,355.60</em>원</span>
                  </li>
                  <li>
                    <span class="tit">나의 <span>달러머니</span> 평균가</span>
                    <span class="txt"><span class="emoji_avg"></span><em class="txt_num">1,355.60</em>원</span>
                  </li>
                </ul>
                <div class="txt_total">
                  <strong class="tit">아낀 환전수수료</strong>
                  <span class="txt txt_point_1"><em class="txt_num">3,400,000</em>원</span>
                </div>
              </div>
              <!-- // 거래내역 있을 시 -->
              <!-- 거래내역 없을 시 -->
              <div class="no_result" style="display: none;">
                <p>최근 1년간 거래하신 내역이 없어요.</p>
                <div class="wrap_btn">
                  <a href="#none" class="btn_round_m btn_primary">환율 100% 우대받고 충전하기</a>
                </div>
              </div>
              <!-- // 거래내역 없을 시 -->
            </div>

          </div>
        </section>
        <!-- 하단고정영역 -->
        <div class="section_bottom_fixed type_noFullBtn">
          <a href="#none" class="btn_round_ico bg_black fnScrollEnd"><span class="ico_alarm"></span><span class="txt">환율 알림 설정</span></a>
        </div>
        <!-- // 하단고정영역 -->
      </div>
    </div> 
    <!-- // contents-->
  </main>

  <script src="../../../js/hmui/lib/chart.js"></script>
  <script src="../../../js/hmui/lib/chartjs-plugin-annotation.js"></script>
  <script src="../../../js/hmui/chart/chart_EXR002.js"></script>
  
  <script>
    // 차트
    var chartEXR;
    // 차트 data 선언 
    var labels = [],
        lineChart_exr002 = [];

    // 데이터 확인용 샘플
    labels = ['22.10.01','22.10.02','22.10.03','22.10.04','22.10.05','22.10.06','22.10.07',];
    lineChart_exr002 = [1500.12, 1500.15, 1411.32, 1481.32, 1433.76, 1451.90, 1500.52];


    $(function(){
      // 차트생성 param canvasID, Index, label, data
      createChart('#lineChart_exr002', 0, labels, lineChart_exr002);

      $('.btn_refresh').on('click', function(){
        // 로딩 시 param element class
        skeletonLoading.start('.exr_info, .wrap_detail_exr'); // 텍스트로딩
        skeletonLoading.start('.wrap_chart'); // 차트로딩


        // 데이터 업데이트 확인용 샘플
        lineChart_exr002 = [100, 0, 5, 2, 20, 30, 45];


        setTimeout(function(){
          // 로딩 완료 시 param element class
          skeletonLoading.end('.exr_info, .wrap_detail_exr');
          skeletonLoading.end('.wrap_chart');

          // 차트 업데이트 param chart label data
          updateChart(chartEXR, labels, lineChart_exr002);
        },2000);
      });

      // 환율상세보기 버튼 클릭 시 텍스트 변경
      $('.btn_acco').on('click', function(){
        var text = $(this).text();
        if ($(this).hasClass('on')) {
          $(this).html('상세환율 닫기<span class="ico_arr_down_2"></span>');
        } else {
          $(this).html('상세환율 보기<span class="ico_arr_down_2"></span>');
        }
      }); 
    });
  </script>
  
</body>
</html>