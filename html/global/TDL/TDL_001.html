<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="format-detection" content="telephone=no">
  <title>TDL_001</title>

  <link rel="stylesheet" href="../../../css/hmui/swiper.css">
  <link rel="stylesheet" href="../../../css/hmui/animate.css">
  <link rel="stylesheet" href="../../../css/hmui/common.css">
  <link rel="stylesheet" href="../../../css/global/contents.css">
  <script src="../../../js/hmui/lib/jquery-1.12.3.min.js"></script>
  <script src="../../../js/hmui/lib/swiper.js"></script>
  <script src="../../../js/hmui/lib/waypoints.min.js"></script>
  <script src="../../../js/hmui/lib/jquery.counterup.js"></script>
  <script src="../../../js/hmui/ui_common.js"></script>
</head>
<body>
  <main id="root">
    <header id="header">
      <div class="inner_fixed">
        <button class="btn_ico_prev"><span class="blind">이전</span></button>
        <h1>하나머니 조회</h1>
        <button class="btn_ico_card_header"><span class="blind">트래블로그 혜택안내</span></button>
      </div>
    </header>
    <!-- // header -->

    <div id="contents" class="wrap_contents">
      <div class="contents">
        <section data-roll="TDL">
          <div class="section_moneybag">
            <!-- 외화 돈통 오픈 시 노출 -->
            <div class="wrap_moneybag_tab fnFixedTop" data-visible-type="hidden" data-height="56">
              <ul>
                <li class="on"><button type="button" class="txt_ccy"><span class="ico_hanamoney"></span><span>하나머니</span></button></li>
                <li><button type="button" class="txt_ccy"><span class="ico_cur_usd"></span><span>미국 USD</span></button></li>
                <li><button type="button" class="txt_ccy"><span class="ico_cur_eur"></span><span>유럽 EUR</span></button></li>
                <li><button type="button" class="txt_ccy"><span class="ico_cur_gbp"></span><span>영국 GBP</span></button></li>
                <li><button type="button" class="txt_ccy"><span class="ico_cur_jpy"></span><span>일본 JPY</span></button></li>
                <li><button type="button" class="txt_ccy"><span class="wrap_ico_ccy"><span class="ico_cur_usd"></span><span class="ico_cur_eur"></span><span class="ico_cur_gbp"></span><span class="ico_cur_jpy"></span></span><span>추가하기</span></button></li>
              </ul>
            </div>
            <!-- // 외화 돈통 오픈 시 노출 -->

            <div class="swiper-container">
              <div class="swiper-wrapper">
                <!-- 원화 -->
                <div class="swiper-slide">
                  <div class="box_moneybag fnSimpleAcco" data-ccy="krw">
                    <h2 class="txt_ccy"><span class="ico_hanamoney"></span><span>하나머니</span></h2>
                    <!-- CASE #1 잔액 0원 -->
                    <!-- <p class="total_amount"><strong class="txt_num">0</strong>원</p> -->
                    <button class="total_amount btn_acco"><strong class="txt_num">100,000,000</strong>원<span class="ico_arr_down_2"><span class="blind">상세보기</span></button>
                    <div class="wrap_acco">
                      <ul class="list_info">
                        <li>
                          <span class="tit"><button type="button" class="btn_info">대기 하나머니<span class="ico_info"></span></button></span>
                          <span class="txt"><em class="txt_num">1,600,000</em>원</span>
                        </li>
                        <li>
                          <span class="tit">현금화가능 하나머니</span>
                          <span class="txt"><em class="txt_num">1,600,000</em>원</span>
                        </li>
                        <li>
                          <span class="tit">소멸예정 하나머니</span>
                          <span class="txt"><em class="txt_num">1,600,000</em>원</span>
                        </li>
                        <li>
                          <span class="tit">카드충전 하나머니</span>
                          <span class="txt"><em class="txt_num">1,600,000</em>원</span>
                        </li>
                      </ul>
                    </div>
                    <ul class="box_btn_list">
                      <!-- <li><button type="button">포인트전환</button></li> -->
                      <li><button type="button">충전</button></li>
                      <li><button type="button">결제</button></li>
                      <li><button type="button" class="btn_primary">무료송금</button></li>
                      <!-- <li><button type="button" class="btn_primary">무료적립</button></li> -->
                    </ul>
                    <button type="button" class="btn_ico_more"><span class="blind">돈통더보기</span></button>
                  </div>
                </div>
                <!-- // 원화 -->
                <!-- 외화 USD -->
                <div class="swiper-slide">
                  <div class="box_moneybag" data-ccy="usd">
                    <h2 class="txt_ccy"><span class="ico_cur_usd"></span>미국 USD</h2>
                    <p class="total_amount">$<strong class="txt_num">1,600.00</strong></p>
                    <ul class="box_btn_list">
                      <li><button type="button">환전</button></li>
                      <li><button type="button" class="btn_primary">충전</button></li>
                    </ul>
                    <button type="button" class="btn_ico_more"><span class="blind">돈통더보기</span></button>
                  </div>
                </div>
                <!-- // 외화 USD -->
                <!-- 외화 EUR -->
                <div class="swiper-slide">
                  <div class="box_moneybag" data-ccy="eur">
                    <h2 class="txt_ccy"><span class="ico_cur_eur"></span>유럽 EUR</h2>
                    <p class="total_amount">€<strong class="txt_num">1,600.00</strong></p>
                    <ul class="box_btn_list">
                      <li><button type="button">환전</button></li>
                      <li><button type="button" class="btn_primary">충전</button></li>
                    </ul>
                    <button type="button" class="btn_ico_more"><span class="blind">돈통더보기</span></button>
                  </div>
                </div>
                <!-- // 외화 EUR -->
                <!-- 외화 GBP -->
                <div class="swiper-slide">
                  <div class="box_moneybag" data-ccy="gbp">
                    <h2 class="txt_ccy"><span class="ico_cur_gbp"></span>영국 GBP</h2>
                    <p class="total_amount">£<strong class="txt_num">1,600.00</strong></p>
                    <ul class="box_btn_list">
                      <li><button type="button">환전</button></li>
                      <li><button type="button" class="btn_primary">충전</button></li>
                    </ul>
                    <button type="button" class="btn_ico_more"><span class="blind">돈통더보기</span></button>
                  </div>
                </div>
                <!-- // 외화 GBP -->
                <!-- 외화 JPY -->
                <div class="swiper-slide">
                  <div class="box_moneybag" data-ccy="jpy">
                    <h2 class="txt_ccy"><span class="ico_cur_jpy"></span>일본 JPY</h2>
                    <p class="total_amount">¥<strong class="txt_num">0</strong></p>
                    <ul class="box_btn_list">
                      <!-- <li><button type="button">환전</button></li> -->
                      <li><button type="button" class="btn_primary">충전</button></li>
                    </ul>
                    <button type="button" class="btn_ico_more"><span class="blind">돈통더보기</span></button>
                  </div>
                </div>
                <!-- // 외화 JPY -->
                <!-- 외화돈통 미오픈 -->
                <div class="swiper-slide">
                  <div class="box_moneybag">
                    <div class="msg_no_moneybag">
                      <p class="wrap_ico_ccy"><span class="ico_cur_usd"></span><span class="ico_cur_eur"></span><span class="ico_cur_gbp"></span><span class="ico_cur_jpy"></span></p>
                      <p class="tit">하나머니가 만든 수수료 없는 세상</p>
                      <p class="txt">무료환전에 결제 수수료까지! 다~ 무료</p>
                    </div>
                    <ul class="box_btn_list">
                      <li><button type="button" class="btn_primary">바로 혜택받기</button></li>
                    </ul>
                  </div>
                </div>
                <!-- // 외화돈통 미오픈 -->
              </div>
            </div>
            <div class="swiper-pagination"></div>
          </div>

          <div class="wrap_banner_box benefit_link">
            <!-- 이번달 받은 혜택이 있는 경우 -->
            <a href="#none" class="link_box benefit_montly">
              <p class="tit">
                <span class="ico_present"></span>
                <em>이번달 받은 혜택</em>
              </p>
              <span class="txt_total_benefit"><em class="txt_num">400,000</em>원</span>
            </a>
            <!-- 이번달 받은 혜택이 없는 경우 -->
            <a href="#none" class="link_box benefit_others">
              <span class="img_character_question"></span>
              <p class="tit">남들은<br><em>어떤 혜택을 받고 있을까요?</em></p>
            </a>
          </div>
          
          <!-- 조회 리스트 -->
          <div class="section_list_trans">
            <!-- 조회필터 -->
            <div class="wrap_filter">
              <p class="filter_list"><span>이번달</span><span>최신순</span><span>전체</span></p>
              <button type="button" class="btn_ico_filter"><span class="blind">상세조회 설정</span></button>
            </div>
            <!-- // 조회필터 -->

            <div class="wrap_list_trans">
              <div class="list_trans">
                <div class="trans_info">
                  <h4>3월 24일 (토)</h4>
                  <ul>
                    <li>
                      <button id="test" type="button" class="row">
                        <strong class="tit">하나머니 → JPY</strong>
                        <span class="txt_amount"><em class="txt_num">-999,999,999</em></span>
                        <span class="ico_arr_link_s"><span class="blind">상세내역</span></span>
                      </button>
                      <div class="row">
                        <ul class="desc"><li>11:31</li><li>JPY 환전</li></ul>
                        <span class="desc"><span class="blind">잔액</span><em class="txt_num">200,000,000</em></span>
                      </div>
                      <span class="txt_noti">수수료면제 <em class="txt_num">2,000,000</em>원</span>
                    </li>
                    <li>
                      <button type="button" class="row">
                        <strong class="tit">스타벅스 선유도역 1번출구점 스타벅스</strong>
                        <span class="txt_amount add"><em class="txt_num">999,999,999</em></span>
                        <span class="ico_arr_link_s"><span class="blind">상세내역</span></span>
                      </button>
                      <div class="row">
                        <ul class="desc"><li>11:31</li><li>JPY 환전</li></ul>
                        <span class="desc"><span class="blind">잔액</span><em class="txt_num">200,000,000</em></span>
                      </div>
                      <p class="txt_sm">상품교환 전 취소 가능 <button type="button" class="btn_txt txt_point_1">취소</button></p>
                    </li>
                  </ul>
                </div>
                <div class="trans_info">
                  <h4>3월 23일 (금)</h4>
                  <ul>
                    <li>
                      <div class="row">
                        <strong class="tit">하나머니 → JPY</strong>
                        <span class="txt_amount"><em class="txt_num">-20,000,000</em></span>
                      </div>
                      <div class="row">
                        <ul class="desc"><li>11:31</li><li>JPY 환전</li></ul>
                        <span class="desc"><span class="blind">잔액</span><em class="txt_num">200,000,000</em></span>
                    </li>
                  </ul>
                </div>
              </div>
  
              <div class="list_trans">
                <h3 class="tit_divider">2021</h3>
                <div class="trans_info foriegn"><!-- 외화일 경우 foriegn 클래스 추가 -->
                  <h4>3월 24일 (토)</h4>
                  <ul>
                    <li>
                      <div class="row">
                        <button type="button" class="row">
                          <strong class="tit">CATHAY UNITED BANK 130061971 CATHAY UNITED BANK 130061971</strong>
                          <span class="txt_amount">-USD <em class="txt_num">999,999,999</em></span>
                          <span class="ico_arr_link_s"><span class="blind">상세내역</span></span>
                        </button>
                      </div>
                      <div class="row">
                        <ul class="desc"><li>12:59</li><li>하나머니 환전</li></ul>
                        <span class="desc"><span class="blind">잔액</span><em class="txt_num">1042.00</em></span>
                      </div>
                      <span class="txt_noti">수수료면제 USD <em class="txt_num">3.78</em></span>
                    </li>
                    <li>
                      <div class="row">
                        <button type="button" class="row">
                          <strong class="tit">CATHAY UNITED BANK 130061971 CATHAY UNITED BANK 130061971</strong>
                          <span class="txt_amount add">USD <em class="txt_num">999,999,999</em></span>
                          <span class="ico_arr_link_s"><span class="blind">상세내역</span></span>
                        </button>
                      </div>
                      <div class="row">
                        <ul class="desc"><li>12:59</li><li>하나머니 환전</li></ul>
                        <span class="desc"><span class="blind">잔액</span><em class="txt_num">1042.00</em></span>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>  
            </div>
            
            <!-- 내역없음 -->
            <div class="msg_noresult">
              <p class="tit">이번달에 거래하신 내역이 없어요</p>
              <div class="wrap_btn">
                <a href="#none" class="btn_box_sm">무료적립받기</a>
              </div>
            </div>
            <!-- // 내역없음 -->

            <!-- list loader -->
            <div class="mesh-loader">
              <div class="set-one">
                  <div class="circle"></div><div class="circle"></div>
              </div>
              <div class="set-two">
                <div class="circle"></div><div class="circle"></div>
              </div>
            </div>
            <!-- // list loader -->
          </div>
          <!-- // 조회 리스트 -->

          <!-- 외화돈통 미오픈 -->
          <div class="wrap_item_benefit" style="display: none;">
            <h3 class="tit_wrap">트래블로그 서비스를<br/>이용한다면?</h3>
            <ul class="list_benefit type_ico">
              <li>
                <span class="box"><span class="emoji_cashback"></span></span>
                <div class="item_desc">
                  <p class="txt">무료환전으로 $1,600 환전 시</p>
                  <p class="tit">최대 85,579원을 내드려요</p>
                </div>
              </li>
              <li>
                <span class="box"><span class="emoji_burger"></span></span>
                <div class="item_desc">
                  <p class="txt">해외에서 쉑쉑버거 $5.29 결제 시</p>
                  <p class="tit">해외결제 수수료 $0.6 내드려요</p>
                </div>
              </li>
              <li>
                <span class="box"><span class="emoji_mac"></span></span>
                <div class="item_desc">
                  <p class="txt">직구로 아이맥 $1,250.00 결제 시</p>
                  <p class="tit">해외결제 수수료 $25.3 내드려요</p>
                </div>
              </li>
              <li>
                <span class="box"><span class="emoji_cash"></span></span>
                <div class="item_desc">
                  <p class="txt">해외에서 $10 출금 시</p>
                  <p class="tit">해외출금 수수료 $3.13 내드려요</p>
                </div>
              </li>
              <li>
                <span class="box"><span class="emoji_cashback"></span></span>
                <div class="item_desc">
                  <p class="txt">국내에서도 사용할 수 있어요!</p>
                  <p class="tit">원화 결제 시 0.3% 캐시백!</p>
                </div>
              </li>
            </ul>
            <p class="txt_guide"><span class="ico_info"></span>2022년04월28일(576회차) USD 기준</p>
          </div>
          <!-- // 외화돈통 미오픈 -->
          
        </section>
        <!-- // section -->
      </div>
    </div>
    <!-- // contents-->


    <!-- 상세팝업 -->
    <div id="popupId" class="wrap_layer type_full">
      <div class="inner_layer">
        <div class="head_layer">
          <h2 class="logo_hanamoney"><span class="blind">하나머니</span></h2>
        </div>

        <div class="content_layer">
          <div class="section_detail_trans">
            <div class="wrap_top_info">
              <div class="fnFixedTop" data-height="50">
                <p class="txt_type">송금</p>
                <p class="txt_amount"><em class="num">2,000,000</em>원</p>
                <!-- 충전 케이스 시 add 클래스 추가  -->
                <!-- <p class="txt_amount add">USD <em class="num">2,000,000</em></p> -->
              </div>
              <div class="trans_info">
                <p class="tit">하나머니 → JPY</strong>
                <p class="desc">2022.03.08(월) 23:00</p>
              </div>
            </div>

            <div class="msg_benefit"><span class="ico_present"></span><p>수수료 USD <em class="txt_num">13.00</em>을 아꼈어요!</p></div>

            <div class="wrap_list">
              <ul class="list_info">
                <!-- 원화 케이스 -->
                <li>
                  <span class="tit">입금계좌번호</span>
                  <span class="txt"><em>하나은행</em> <em>19200000990</em></span>
                </li>
                <li>
                  <span class="tit">보내는 분</span>
                  <span class="txt">이하나</span>
                </li>
                <li>
                  <span class="tit">거래사유</span>
                  <span class="txt">계좌송금</span>
                </li>
                <li>
                  <span class="tit txt_point_3">송금수수료</span>
                  <strong class="txt txt_point_3"><em class="txt_num">0</em>원</strong>
                </li>
                <!-- // 원화 케이스 -->
                <!-- 외화 케이스 -->
                <li>
                  <span class="tit">출금수단</span>
                  <span class="txt">태국</span>
                </li>
                <li>
                  <span class="tit">출금수단</span>
                  <span class="txt">트래블로그 카드명 풀네임</span>
                </li>
                <li>
                  <span class="tit">현지출금통화금액</span>
                  <span class="txt">THB <em class="txt_num">55,178.18</em></span>
                </li>
                <li>
                  <span class="tit">적용환율</span>
                  <span class="txt">
                    <span class="ico_cur_usd"></span> <em>USD</em> 1 = <em>THB</em> <em class="txt_num">54,603.37</em>
                  </span>
                </li>
                <li>
                  <span class="tit">기타통화 환전수수료</span>
                  <span class="txt">USD <em class="txt_num">1.90</em></span>
                </li>
                <li>
                  <span class="tit">거래사유</span>
                  <span class="txt">THB ATM출금</span>
                </li>
                <li>
                  <span class="tit txt_point_3">해외 ATM출금 수수료</span>
                  <strong class="txt txt_point_3 txt_cancel">USD <em class="txt_num">13</em></strong>
                </li>
                <!-- // 외화 케이스 -->
              </ul>
            </div>
          </div>
        </div>

        <!-- 하단고정영역 -->
        <div class="section_bottom_fixed">
          <div class="wrap_btn_full type_ico">
            <button type="button" class="btn_full_secondary btn_ico_download"><span class="blind">저장하기</span></button>
            <button type="button" class="btn_full_primary fnClosePop">확인</button>
          </div>
        </div>
        <!-- // 하단고정영역 -->
      </div>
    </div>
    <!-- // 상세팝업 -->
  </main>
  

  <script>
  $(function(){
    // 돈통 swipe option
    var swiper = new Swiper('.swiper-container', {
      observer: true,
      observeParents: true,
      resistance: true,
      resistanceRatio: 0,
      direction: 'horizontal',
      loop: false,
      autoHeight : true,
      pagination: {
        el: '.swiper-pagination',
      },
      on : {
        init: function(){
          $(this.slides[0]).find('.total_amount .txt_num').counterUp({
            delay: 20,
            time: 700
          });
        },
      }
    });

    // 돈통 swipe 시
    swiper.on('slideChange', function() {
      var idx = this.realIndex;
      var $active = $(this.slides[idx]);

      activeSlide(idx);
      $active.find('.total_amount .txt_num').counterUp({
        delay: 20,
        time: 700
      });

      // 돈통 미오픈 slide 인 경우
      if ( $active.find('.msg_no_moneybag').length ){
        $('.wrap_item_benefit').show();
        _showBenefitList();
      }
    });

    // 싱단고정 탭
    var fixedTab = $('.wrap_moneybag_tab');
    var tabPosX = [0];
    var tabLi = 0;
    fixedTab.find('li').each(function(idx){
      tabLi += $(this).outerWidth(true);
      tabPosX[idx + 1] = tabLi;
    });
    $(document).on('click', '.wrap_moneybag_tab li', function(){
      var tabIdx = $(this).index();
      activeSlide(tabIdx);
      swiper.slideTo(tabIdx);
    });

    var activeSlide = function(slideIdx){
      var activeTab = fixedTab.find('li').eq(slideIdx);
      if (!activeTab.hasClass('on')) {
        activeTab.addClass('on').siblings().removeClass('on');
        fixedTab.find('ul').scrollLeft(tabPosX[slideIdx]);
      }

      var ccy = $(swiper.slides[slideIdx]).find('.box_moneybag').data('ccy');
      if ( ccy ) {
        $('.section_moneybag').attr('data-ccy',ccy);
      } else {
        $('.section_moneybag').removeAttr('data-ccy');
      }

      $(document).scrollTop(0);
    };

    // 원화돈통 잔액 터치 시 높이 계산
    $(document).on('click', '.fnSimpleAcco .btn_acco', function(){
      $(swiper.wrapperEl).css({'height':''});
      setTimeout(function(){
        swiper.update();
        $(swiper.wrapperEl).css('height',swiper.height);
      },300);
    });

    //로딩 시 wrap_list_trans에 skeleton loading을 위한 element prepend 후 end 시 삭제기능을 하는 함수 호출
    skeletonLoading.start('.section_list_trans'); // 로딩 시
    setTimeout(function(){
      skeletonLoading.end('.section_list_trans'); // 로딩 완료
    },2000);
  });


  $('#test').on('click', function(){
    fnOpenLayerPop('popupId');
  });
  $('.btn_ico_download').on('click', function(){        
        
        // 스크린샷 높이해제 param 해당팝업 element
        fnLayerScreenShot2.set($('#popupId'));

        setTimeout(function(){
          // 스크린샷 완료 후 원래 상태로
          fnLayerScreenShot2.complete();
          // 토스트 팝업 호출 param 해당팝업 id
          fnToastPop('toast');
        },3000);
        // setTimeout은 상태변화 확인 위한 임의 function
        
      })
  </script>
</body>
</html>