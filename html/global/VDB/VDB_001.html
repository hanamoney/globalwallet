<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="format-detection" content="telephone=no">
  <title>VDB_001</title>

  <link rel="stylesheet" href="../../..../../../css/hmui/swiper.css">
  <link rel="stylesheet" href="../../../css/hmui/animate.css">
  <link rel="stylesheet" href="../../../css/hmui/common.css">
  <link rel="stylesheet" href="../../../css/global/contents.css">
  <script src="../../../js/hmui/lib/jquery-1.12.3.min.js"></script>
  <script src="../../../js/hmui/lib/swiper.js"></script>
  <script src="../../../js/hmui/lib/waypoints.min.js"></script>
  <script src="../../../js/hmui/lib/jquery.counterup.js"></script>
  <script src="../../../js/hmui/ui_common.js"></script>
</head>
<body>
  <main id="root">
    <header id="header">
      <div class="inner_fixed">
        <button class="btn_ico_prev"><span class="blind">이전</span></button>
        <h1>내가 받은 혜택</h1>
        <button class="btn_ico_menu"><span class="blind">전체메뉴</span></button>
      </div>
    </header>
    <!-- // header -->

    <div id="contents" class="wrap_contents">
      <div class="contents">
        <section data-roll="VDB">
          <div class="section_top_visual my_benefit default"><!-- 22.06.09 기본 클래스 추가 -->
            <div class="wrap_dropdown">
              <button type="button" class="btn_dropdown"><span class="current">4월</span></button>
              <div class="list_dropdown">
                <ul>
                  <li><button type="button"><span>3월</span></button></li>
                  <li><button type="button"><span>2월</span></button></li>
                  <li><button type="button"><span>1월</span></button></li>
                </ul>
              </div>
            </div>

            <!-- CASE “모은 돈과 아낀 돈” 모두 있는 경우 -->
            <div class="my_benefit_info">
              <div class="wrap_tit type_center">
                <h2 class="tit"><em>내가 받은 혜택은?</em><br>두구두구두구!</h2><!-- 22.06.09 기본텍스트 추가 -->
              </div>
              <div class="visual_vdb_total">
                <div class="bubble accum"><button type="button" id="test1"><p class="total_amount fnFitToCont"><em class="txt_num" id="accumTotal">0</em>원</p><p>모았어요!</p></button></div>
                <span class="img_character_dance" aria-hidden="true"></span>
                <div class="bubble saved"><button type="button" id="test2"><p class="total_amount fnFitToCont"><em class="txt_num" id="savedTotal">0</em>원</p><p>아꼈어요!</p></button></div>
              </div>
            </div>

            <!-- CASE #1 “모은 돈과 아낀 돈” 모두 없는 경우 -->
            <!-- <div class="my_benefit_info no_accum no_saved">
              <div class="wrap_tit type_center">
                <h2 class="tit"><em>나만 없어!</em><br>하나머니 혜택 ㅠㅠ</h2>
              </div>
              <div class="visual_vdb_total">
                <div class="bubble accum"><p class="total_amount fnFitToCont"><em class="txt_num">0</em>원</p><p>모았어요!</p></div>
                <span class="img_character_cry" aria-hidden="true"></span><!--img_character_cry 이미지 변경
                <div class="bubble saved"><p class="total_amount fnFitToCont"><em class="txt_num">0</em>원</p><p>아꼈어요!</p></div>
              </div>
            </div> -->

            <!-- CASE #2 ‘모은 돈”이 없는 경우 -->
            <!-- <div class="my_benefit_info no_accum"><!-- no_accum 클래스 추가 
              <div class="wrap_tit type_center">
                <h2 class="tit">총 <em class="txt_amount"><span class="txt_num fnCounterUp">400,000</span>원</em>을<br>아꼈어요!</h2>
              </div>
              <div class="visual_vdb_total">
                <div class="bubble accum"><p class="total_amount fnFitToCont"><em class="txt_num">0</em>원</p><p>모았어요!</p></div>
                <span class="img_character_dance" aria-hidden="true"></span>
                <div class="bubble saved"><p class="total_amount fnFitToCont"><em class="txt_num">99,999,999</em>원</p><p>아꼈어요!</p></div>
              </div>
            </div> -->

            <!-- CASE #3 ‘아낀 돈”이 없는 경우 -->
            <!-- <div class="my_benefit_info no_saved"><!-- no_saved 클래스 추가 
              <div class="wrap_tit type_center">
                <h2 class="tit">총 <em class="txt_amount"><span class="txt_num fnCounterUp">400,000</span>원</em>을<br>모았어요!</h2>
              </div>
              <div class="visual_vdb_total">
                <div class="bubble accum"><p class="total_amount fnFitToCont"><em class="txt_num">999,999</em>원</p><p>모았어요!</p></div>
                <span class="img_character_dance" aria-hidden="true"></span>
                <div class="bubble saved"><p class="total_amount fnFitToCont"><em class="txt_num">0</em>원</p><p>아꼈어요!</p></div>
              </div>
            </div> -->
            
          </div>

          <div class="section_cont vdb_accum" id="divAccum">
            <!-- CASE #1 받은 돈이 있는 경우 노출 -->
            <div id="existRvAm">
              <h3 class="tit_section_2"><em>‘포인트전환 적립’</em>으로<br>가장 많이 모았어요!</h3>
              <span class="img_character_bebe_dance"></span>
              <div class="box_card_type">
                <ul class="wrap_vdb_list">
                  <li>
                    <button type="button"><!-- 22.08.19 버튼추가 -->
                      <p class="tit_counter"><span class="num">1</span><span>그 외 적립</span></p>
                      <div class="chart_coin" data-percent="100"></div>
                      <p class="txt_amount fnFitToCont"><em class="txt_num" id="test2">0</em>원</p>
                    </button>
                  </li>
                  <li>
                    <button type="button"><!-- 22.08.19 버튼추가 -->
                      <p class="tit_counter"><span class="num">2</span><span>포인트전환 적립</span></p>
                      <div class="chart_coin" data-percent="0"></div>
                      <p class="txt_amount fnFitToCont"><em class="txt_num">0</em>원</p>
                    </button>
                  </li>
                  <!-- 항목이 없는 경우 empty 클래스 추가-->
                  <li class="empty">
                    <button type="button" disabled><!-- 22.08.19 버튼추가, 항목이 없는 경우 disabled 속성 추가 -->
                      <p class="tit_counter"><span class="num">3</span><span></span></p>
                      <div class="chart_coin"></div>
                    </button>
                  </li>
                </ul>
              </div>
            </div>

            <!-- CASE #2 받은 돈이 없는 경우 노출 -->
            <div id="notExistRvAm">
              <h3 class="tit_section_2">하나머니에서는 <em>다양한</em><br><em>무료적립</em>을 받을 수 있어요!</h3>
              <div class="wrap_hashtag">
                <span class="txt_hashtag">#<span>포인트전환 적립</span></span>
                <span class="txt_hashtag">#<span>선물하기 적립</span></span>
                <span class="txt_hashtag">#<span>카드사용 적립</span></span>
                <span class="txt_hashtag">#<span>이벤트 적립</span></span>
              </div>
              <span class="img_character_bebe_dance"></span>
              <div class="wrap_btn type_full">
                <a href="#none" class="btn_box_m type_white rounded">무료적립받기</a><!-- 22.05.31 문구변경 -->
              </div>
            </div>
          </div>

          <div class="section_cont vdb_saved" id="divSaved">
            <!-- CASE #3 아낀 돈이 있는 경우 노출 -->
            <div id="existFvrAm">
              <h3 class="tit_section_2">
                <button type="button" class="btn_tooltip fnOpenTooltip" data-name="tooltip">
                  <em>‘해외 ATM 출금’</em>에서<br>가장  많이 아꼈어요!
                  <span class="ico_tooltip"><span class="blind">툴팁</span>
                </button>
              </h3>
              <div class="box_card_type">
                <span class="img_character_hahamom_dance"></span>
                <ul class="wrap_vdb_list">
                  <li>
                    <button type="button"><!-- 22.08.19 버튼추가 -->
                      <p class="tit_counter"><span class="num">1</span><span>해외 ATM 인출 수수료</span></p><!-- 22.05.31 문구변경 -->
                      <div class="chart_coin" data-percent="100"></div>
                      <p class="txt_amount fnFitToCont"><em class="txt_num">0</em>원</p>
                    </button>
                  </li>
                  <li>
                    <button type="button"><!-- 22.08.19 버튼추가 -->
                      <p class="tit_counter"><span class="num">2</span><span>해외 가맹점 이용수수료</span></p><!-- 22.05.31 문구변경 -->
                      <div class="chart_coin" data-percent="0"></div>
                      <p class="txt_amount fnFitToCont"><em class="txt_num">0</em>원</p>
                    </button>
                  </li>
                  <!-- 항목이 없는 경우 empty 클래스 추가-->
                  <li class="empty">
                    <button type="button" disabled><!-- 22.08.19 버튼추가, 항목이 없는 경우 disabled 속성 추가 -->
                      <p class="tit_counter"><span class="num">3</span><span></span></p>
                      <div class="chart_coin"></div>
                    </button>
                  </li>
                </ul>
              </div>
            </div>
            
            <!-- CASE #4 아낀 돈이 없는 경우 노출 -->
            <div class="wrap_item_benefit" id="notExistFvrAm">
              <h3 class="tit_section_2"><em>트래블로그 서비스</em>를 이용하면<br>이렇게 <em>아낄 수 있어요!</em></h3>
              <!-- 22.05.31 문구변경 -->
              <ul class="list_benefit type_ico box_white">
                <li>
                  <span class="box"><span class="emoji_cashback"></span></span>
                  <div class="item_desc">
                    <p class="txt">하나머니에서 $1,500 환전 시</p><!-- 22.08.10 / 22.07.13 문구변경 -->
                    <p class="tit">환전수수료 최대 <span class="txt_cancel">33,420원</span></p><!-- 22.08.10 문구변경 -->
                  </div>
                </li>
                <li>
                  <span class="box"><span class="emoji_burger"></span></span>
                  <div class="item_desc">
                    <p class="txt">해외에서 쉑쉑버거 $5.29 결제 시</p>
                    <p class="tit">해외 가맹점 이용수수료 <span class="txt_cancel">$0.6</span></p>
                  </div>
                </li>
                <li>
                  <span class="box"><span class="emoji_mac"></span></span>
                  <div class="item_desc">
                    <p class="txt">직구로 아이맥 $1,250.55 결제 시</p>
                    <p class="tit">해외 가맹점 이용수수료 <span class="txt_cancel">$25.3</span></p>
                  </div>
                </li>
                <li>
                  <span class="box"><span class="emoji_cash"></span></span>
                  <div class="item_desc">
                    <p class="txt">해외에서 $10 출금 시</p>
                    <p class="tit">해외 ATM 인출 수수료 <span class="txt_cancel">$3.13</span></p>
                  </div>
                </li>
              </ul>
              <p class="txt_guide"><span class="ico_info_2"></span>22.04.28(576회차) USD 기준</p>
              <!-- // 22.05.31 문구변경 -->
              <div class="wrap_btn type_full">
                <a href="#none" class="btn_box_m type_line rounded">트래블로그 혜택 자세히보기</a>
              </div>
            </div>
          </div>

          <div class="section_cont">
            <h3 class="tit_section_center_2"><em class="txt_point_1">혜택마스터 TOP3는</em><br>어떤 서비스를 쓸까요?</h3>
            <div class="wrap_btn type_full">
              <a href="#none" class="btn_box_m btn_primary rounded">혜택 마스터 엿보기</a>
            </div>
          </div>

          <div class="section_cont vdb_recomm">
            <h3 class="tit_section_center_2">친구 추천하고<br><em><span class="txt_num">2,000</span>하나머니</em> 받으세요!</h3>
            <div class="visual_vdb_recomm">
              <p class="img_character_feed"></p>
              <span class="img_like"></span>
            </div>
            <div class="wrap_hashtag type_center">
              <span class="txt_hashtag">#<span><em>생각보다 쓸데 많음</em></span></span>
              <span class="txt_hashtag">#<span><em>출금</em>도 됨</span></span><br>
              <span class="txt_hashtag">#<span><em>무한으로 친구추천가능</em></span></span>
              <span class="txt_hashtag">#<span>언제까지받을것인가</span></span>
            </div>
            <div class="wrap_btn type_full">
              <a href="#none" class="btn_box_m type_line rounded">하나머니 받으러가기</a><!-- 22.05.31 문구변경 -->
            </div>
          </div>

          <div class="wrap_notice">
            <h4 class="tit_notice"><span class="ico_notice"></span>알려드립니다!</h4>
            <ul class="list_txt">
              <li><strong>모은 돈 :</strong> 무료적립, 포인트전환 적립, 선물하기 적립, 카드사용 적립, 이벤트 적립 등을 통해 받은 하나머니 적립금액입니다.</li>
              <li><strong>아낀 돈 :</strong> 트래블로그 서비스를 통해 아낀 수수료입니다.  전 영업일 기준 하나은행 최종 매매기준율로 계산한 예측 금액입니다.</li>
              <li>이전에 받은 혜택 금액은 기존 거래가 취소돼도 차감되지 않습니다.</li><!-- 22.07.22 문구추가 -->
            </ul>
          </div>
        </section>
        <!-- // section -->
      </div>
    </div>
    <!-- // contents-->

    <!-- tooltip -->
    <div id="tooltip" class="wrap_tooltip">
      <div class="inner_tooltip">
        <p class="txt_tooltip">4월 12일 하나은행 최종 <em class="txt_bold">매매기준율</em>로 계산한 예측 금액이에요.</p>
        <button class="btn_ico_close fnCloseTooltip"><span class="blind">닫기</span></button>
      </div>
    </div>
    <!-- // tooltip -->
  </main>
  
  <script>
    $(function(){
      setTimeout(function(){
        result_findInfo('neither');// 동작 퍼블 확인용
      },600);
      
        // 월 선택 시
      $('.list_dropdown').find('button').on('click', function(){
        // 열려있는 툴팁 닫기
        if ($('.wrap_tooltip.show').length) {
          $('.wrap_tooltip').removeClass('show');
        }
        
        // 동전 차트 초기화
        fnVdbCoinChart.reset();

        // 동작 퍼블 확인용
        var text = $(this).find('span').text();
        if (text==='3월'){
          result_findInfo('noAccum');
        } else if (text==='2월') {
          result_findInfo('noSaved');
        } else {
          result_findInfo('both');
        }
      });
    });

    Number.prototype.comma = function() {
      if (this == 0) return 0;

      var reg = /(^[+-]?\d+)(\d{3})/;
      var n = (this + '');
      while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');

      return n;
    }

    var myBenefitInfo = $('.my_benefit_info'),
        infoTit = myBenefitInfo.find('.tit'),
        accumTotal = $('#accumTotal'),
        savedTotal = $('#savedTotal'),
        $existRvAm = $('#existRvAm'), // 모은돈O
        $notExistRvAm = $('#notExistRvAm'), // 모은돈X
        $existFvrAm = $('#existFvrAm'), // 아낀돈O
        $notExistFvrAm = $('#notExistFvrAm'); // 모은돈X
    
    function result_findInfo(strData) {
      // 기본화면 클래스 제거
      if ($('.section_top_visual.default').length) {
        $('.section_top_visual.default').removeClass('default');
      }

      var totalAmount;

      if (strData === 'neither') { // 모은돈X 아낀돈X

        myBenefitInfo.addClass('no_accum no_saved');
        infoTit.html('<em>나만 없어!</em><br>하나머니 혜택');
        myBenefitInfo.find('.img_character_dance').addClass('img_character_cry').removeClass('img_character_dance');
        $existRvAm.hide();
        $notExistRvAm.show();
        $existFvrAm.hide();
        $notExistFvrAm.show();

      } else if (strData === 'noAccum') { // 모은돈X 아낀돈O

        myBenefitInfo.removeClass('no_saved').addClass('no_accum');
        myBenefitInfo.find('.img_character_cry').addClass('img_character_dance').removeClass('img_character_cry');
        $existRvAm.hide();
        $notExistRvAm.show();
        $existFvrAm.show();
        $notExistFvrAm.hide();
        
        totalAmount = 999999;
        infoTit.html('<button type="button">총 <em class="txt_amount"><span class="txt_num fnCounterUp">' + totalAmount.comma() + '</span>원</em>을<br>아꼈어요!</button>'); // 22.08.19 버튼추가
        savedTotal.text('99,999,999');
        $existFvrAm.find('li').eq(0).find('.txt_num').text('99,999,999');
        $existFvrAm.find('li').eq(1).find('.txt_num').text('9,999');
        
        // 데이터 변경 후 애니메이션 실행
        fnVdbCoinChart.animate($existFvrAm.find('.wrap_vdb_list'));

      } else if (strData === 'noSaved') { // 모은돈O 아낀돈X

        myBenefitInfo.removeClass('no_accum').addClass('no_saved');
        myBenefitInfo.find('.img_character_cry').addClass('img_character_dance').removeClass('img_character_cry');
        $existRvAm.show();
        $notExistRvAm.hide();
        $existFvrAm.hide();
        $notExistFvrAm.show();
        
        totalAmount = 999999;
        infoTit.html('<button type="button">총 <em class="txt_amount"><span class="txt_num fnCounterUp">' + totalAmount.comma() + '</span>원</em>을<br>모았어요!</button>'); // 22.08.19 버튼추가
        accumTotal.text('999,999');
        $existRvAm.find('li').eq(0).find('.txt_num').text('100,000');
        $existRvAm.find('li').eq(1).find('.txt_num').text('70,000');

        // 데이터 변경 후 애니메이션 실행
        fnVdbCoinChart.animate($existRvAm.find('.wrap_vdb_list'));

      } else { // 모은돈O 아낀돈O

        myBenefitInfo.removeClass('no_accum no_saved');
        myBenefitInfo.find('.img_character_cry').addClass('img_character_dance').removeClass('img_character_cry');
        $existRvAm.show();
        $notExistRvAm.hide();
        $existFvrAm.show();
        $notExistFvrAm.hide();

        totalAmount = 450000;
        infoTit.html('<button type="button">총 <em class="txt_amount"><span class="txt_num fnCounterUp">' + totalAmount.comma() + '</span>원</em> 혜택을<br>받았어요!</button>'); // 22.08.19 버튼추가
        accumTotal.text('400,000');
        savedTotal.text('50,000');
        $existFvrAm.find('li').eq(0).find('.txt_num').text('99,999,999');
        $existFvrAm.find('li').eq(1).find('.txt_num').text('9,999');
        $existRvAm.find('li').eq(0).find('.txt_num').text('100,000');
        $existRvAm.find('li').eq(1).find('.txt_num').text('70,000');

        // 데이터 변경 후 애니메이션 실행
        fnVdbCoinChart.animate($existFvrAm.find('.wrap_vdb_list'));
        fnVdbCoinChart.animate($existRvAm.find('.wrap_vdb_list'));
      }

      // 데이터 설정 후 fnCounterUp 해당 elemnet counterup 실행
      // param ( element, delay, time )
      fnCounterUp($('.fnCounterUp'), 20, 700);
    }

    // 22.08.19 스크롤추가
    $('.bubble.accum').find('button').on('click', function(e){fnScrollToEl($('#divAccum'));});
    $('.bubble.saved').find('button').on('click', function(e){fnScrollToEl($('#divSaved'));});

  </script>
</body>
</html>